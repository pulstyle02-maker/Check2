<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mind Your Minors - Book Checkout</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
.step-line { position: absolute; left: 17px; top: 40px; bottom: -25px; width: 4px; background-color: #e5e7eb; z-index:0; transition:all 0.4s ease;}
.step-line-active { position: absolute; left:17px; top:40px; width:4px; background-color:#06b6d4; z-index:1; transition:height 0.4s ease; height:0;}
@media (max-width:768px) { #progress-bar { display:none; } }
.step-circle { transition: all 0.3s ease; }
#thankyou-section { display:none; }
</style>
</head>
<body>
<div id="app" class="min-h-screen p-4 md:p-8">
<div class="max-w-7xl mx-auto">

<header class="mb-8">
<h1 class="text-3xl font-extrabold text-gray-900">Mind Your Minors - Book Checkout</h1>
<p class="text-gray-500 mt-1">Block 6 Book | Price: <span id="base-price">₨500.00</span></p>
</header>

<div class="md:flex md:space-x-12">

<div id="progress-bar" class="md:w-1/3 relative hidden md:block">
<div class="sticky top-8 pt-4">
<h2 class="text-lg font-semibold text-gray-700 mb-6">Your Progress</h2>
<div class="step-line"></div>
<div id="active-line" class="step-line-active"></div>
<div id="step-container" class="space-y-6">
<div data-target="shipping-step" class="flex items-start step-item relative z-10" id="step-1">
<div class="step-circle w-9 h-9 flex items-center justify-center rounded-full bg-cyan-500 text-white shadow-lg mr-4">1</div>
<div><h3 class="font-bold text-gray-900">Details & Discount</h3><p class="text-sm text-gray-500">Info and Coupon</p></div>
</div>
<div data-target="payment-step" class="flex items-start step-item relative z-10" id="step-2">
<div class="step-circle w-9 h-9 flex items-center justify-center rounded-full bg-gray-300 text-gray-700 mr-4">2</div>
<div><h3 class="font-bold text-gray-900">Payment & Receipt</h3><p class="text-sm text-gray-500">Nayapay Transfer</p></div>
</div>
<div data-target="review-step" class="flex items-start step-item relative z-10" id="step-3">
<div class="step-circle w-9 h-9 flex items-center justify-center rounded-full bg-gray-300 text-gray-700 mr-4">3</div>
<div><h3 class="font-bold text-gray-900">Confirm Order</h3><p class="text-sm text-gray-500">Final Confirmation</p></div>
</div>
</div>
</div>
</div>

<form id="checkout-form" action="https://formsubmit.co/hasnainmughal4200@gmail.com" method="POST" enctype="multipart/form-data" class="md:w-2/3 space-y-12">
<input type="hidden" name="_subject" id="formSubmitSubject" value="NEW MYM Order #">
<input type="hidden" name="_captcha" value="false">
<input type="hidden" name="_next" value="">
<input type="hidden" name="Order Number" id="hiddenOrderNumber" value="">
<input type="hidden" name="Total Amount Paid" id="hiddenTotalAmount" value="">
<input type="hidden" name="Book Name" value="Mind Your Minors - Block 6 Book">
<input type="hidden" name="Base Price" value="500">
<input type="hidden" name="Coupon Used" id="hiddenCouponUsed" value="No">

<!-- 1️⃣ Shipping / Details Step -->
<section id="shipping-step" class="step-section p-6 bg-white rounded-xl shadow-lg border border-cyan-100">
<h2 class="text-2xl font-bold text-cyan-700 mb-6 border-b pb-3">1. Student Details & Shipping</h2>
<div class="space-y-4">
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<input type="text" name="First Name" id="firstName" placeholder="First Name" required class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
<input type="text" name="Last Name" id="lastName" placeholder="Last Name" required class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
</div>

<input type="tel" name="Contact Number" id="contactNumber" placeholder="Contact Number" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">

<!-- College Selection -->
<div>
<label for="collegeSelect" class="block text-sm font-medium text-gray-700 mb-1">Select College</label>
<input list="collegesList" name="College" id="collegeSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500" placeholder="Search or select your college..." required>
<datalist id="collegesList"></datalist>
</div>

<div id="aimc-fields" class="space-y-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg hidden">
<label class="block text-lg font-bold text-yellow-800">Allama Iqbal Medical College Discount</label>
<input type="text" name="AIMC Roll Number" id="rollNumber" placeholder="AIMC Roll Number" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500">
<div class="flex items-center space-x-2">
<input type="text" name="Coupon Code Entered" id="couponCode" placeholder="Enter Coupon Code" value="" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 uppercase">
<button type="button" id="applyCouponBtn" class="bg-cyan-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-cyan-700 transition duration-150">Apply</button>
<div id="couponStatus" class="w-8 h-8 flex items-center justify-center"></div>
</div>
</div>

<h3 class="font-bold text-gray-900 pt-2 border-t mt-4">Shipping Address</h3>
<input type="text" name="Street Address" id="streetAddress" placeholder="Street Address" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<input type="text" name="City" id="city" placeholder="City" required class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
<input type="text" name="Province" id="province" placeholder="State / Province" required class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
<input type="text" name="Zip Code" id="zipCode" placeholder="Zip Code" required class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
</div>
</div>
</section>

<!-- 2️⃣ Payment Step -->
<section id="payment-step" class="step-section p-6 bg-white rounded-xl shadow-lg">
<h2 class="text-2xl font-bold text-cyan-700 mb-6 border-b pb-3">2. Make Payment & Upload Receipt</h2>
<div class="space-y-4">
<p class="text-gray-700">Send the total amount to Nayapay Wallet: <strong>03001234567</strong></p>
<input type="file" name="Payment Receipt" id="paymentReceipt" accept="image/*,.pdf" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500">
</div>
</section>

<!-- 3️⃣ Confirm Step -->
<section id="review-step" class="step-section p-6 bg-white rounded-xl shadow-lg">
<h2 class="text-2xl font-bold text-cyan-700 mb-6 border-b pb-3">3. Confirm Order</h2>
<div id="orderSummary" class="bg-gray-50 p-6 rounded-lg border border-gray-200 space-y-3">
<p><strong>Order Number:</strong> <span id="summaryOrderNumber"></span></p>
<p><strong>Total Amount:</strong> <span id="summaryTotalAmount">₨500</span></p>
<p><strong>Book Name:</strong> Mind Your Minors - Block 6 Book</p>
<p><strong>Coupon Used:</strong> <span id="summaryCoupon">No</span></p>
</div>
<button type="submit" class="mt-4 w-full bg-cyan-600 text-white py-3 rounded-lg font-bold hover:bg-cyan-700 transition">Confirm Order</button>
</section>
</form>

<!-- 4️⃣ Thank You Section (Initially Hidden) -->
<section id="thankyou-section" class="p-6 bg-white rounded-xl shadow-lg mt-8 text-center">
<h1 class="text-3xl font-bold text-cyan-700">Thank You for Your Order!</h1>
<p class="text-gray-700 mt-2">Your order has been successfully placed.</p>
<div class="bg-gray-50 p-6 rounded-lg border border-gray-200 mt-4 space-y-2 inline-block text-left">
<p><strong>Order Number:</strong> <span id="thankOrderNumber"></span></p>
<p><strong>Total Amount Paid:</strong> <span id="thankTotalAmount"></span></p>
<p><strong>Book Name:</strong> Mind Your Minors - Block 6 Book</p>
<p><strong>Coupon Used:</strong> <span id="thankCouponUsed"></span></p>
</div>
</section>

</div>
</div>

<script>
// Colleges Array
const colleges = ["Allama Iqbal Medical College", "Gujranwala Medical College", "Fatima Jinnah Medical University", "King Edward Medical University"];
const datalist = document.getElementById('collegesList');
colleges.forEach(c => { const option = document.createElement('option'); option.value = c; datalist.appendChild(option); });

const collegeSelect = document.getElementById('collegeSelect');
const aimcFields = document.getElementById('aimc-fields');
collegeSelect.addEventListener('input', ()=> {
aimcFields.style.display = collegeSelect.value.trim().toLowerCase() === "allama iqbal medical college" ? 'block':'none';
});

// Coupon Logic
const applyBtn = document.getElementById('applyCouponBtn');
const couponInput = document.getElementById('couponCode');
const couponStatus = document.getElementById('couponStatus');
let discountApplied = false;

applyBtn.addEventListener('click',()=>{
const code = couponInput.value.trim().toUpperCase();
if(code === "AIMC50" && collegeSelect.value.trim().toLowerCase() === "allama iqbal medical college"){
discountApplied=true; couponStatus.textContent="✔"; couponStatus.style.color="green";
document.getElementById('hiddenCouponUsed').value = code;
document.getElementById('summaryCoupon').textContent = code;
document.getElementById('summaryTotalAmount').textContent = "₨250";
}else{discountApplied=false; couponStatus.textContent="✖"; couponStatus.style.color="red"; document.getElementById('hiddenCouponUsed').value="No";document.getElementById('summaryTotalAmount').textContent = "₨500";}
});

// Generate Unique Order Number
function generateOrderNumber(){ return "MYM-"+Date.now(); }
const orderNumber = generateOrderNumber();
document.getElementById('hiddenOrderNumber').value = orderNumber;
document.getElementById('summaryOrderNumber').textContent = orderNumber;

// Set total amount
document.getElementById('hiddenTotalAmount').value = discountApplied?"250":"500";
document.getElementById('summaryTotalAmount').textContent = discountApplied?"₨250":"₨500";

// Form submission
const form = document.getElementById('checkout-form');
form.addEventListener('submit', (e)=>{
// Let FormSubmit handle email
document.getElementById('hiddenTotalAmount').value = discountApplied?"250":"500";
document.getElementById('hiddenCouponUsed').value = discountApplied?couponInput.value.toUpperCase():"No";

// Show Thank You Section after submit
setTimeout(()=>{
document.getElementById('checkout-form').style.display = 'none';
document.getElementById('thankyou-section').style.display = 'block';
document.getElementById('thankOrderNumber').textContent = orderNumber;
document.getElementById('thankTotalAmount').textContent = discountApplied?"₨250":"₨500";
document.getElementById('thankCouponUsed').textContent = discountApplied?couponInput.value.toUpperCase():"No";
},100); // slight delay to allow form submission
});
</script>
</body>
</html>
